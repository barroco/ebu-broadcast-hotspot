<html>
    <head>
        <title>EBU Broadcast Hotspot</title>
        <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    </head>
<body style="font-family:verdana,sans-serif; color:#555">

<a href="http://tech.ebu.ch"><img src="/radiovismanager/img/ebulogo.png" border=0 style="float:left; padding-right:30px;"></a>

<h2>EBU Broadcast Hotspot project page</h2>

<h3>Contact</h3>
<p><address>Author: <b>Matthias Br&auml;ndli</b></address></p>
<p><address>Contact: <b>Mathias Coinchon</b><br /><i>coinchon@ebu.ch</i><br /><i>+41 22 717 27 16</i></address></p>

<h2>Introduction</h2>
<p>A broadcast hotspot is a piece of software which allows a user to receive a over-the-air broadcast signal on a device
that does not have a corresponding receiver. The hotspot therefore must receive the signal, if necessary recode it into
a format that the user device can play, and transmit it over a medium which the user device can communicate over. In most
scenarios, this medium is WiFi, because it is well-supported and available on most devices.</p>

<p>On the user device, a dedicated application has to communicate with the hotspot. This application enables the user to choose
between different receivers, presents the programmes and plays the content. Furthermore, for radio applications, it also
receives slideshow and text data from <a href="http://www.radiodns.org">RadioDNS</a>.</p>


<h2>Components</h2>
<p>This hotspot is able to receive DAB radio using <a href="http://www.openmokast.org">OpenMokast</a>. It has been tested with the 
Albrecht DR 403 USB receiver and with several ETI files as input. The audio data from OpenMokast is then converted to a format the
user device can play using <a href="http://videolan.org/vlc/">VLC</a>. VLC streams the converted audio to the user device using WiFi, 
which plays it. The user device also does the RadioDNS requests and fetches the slideshow by itself.</p>

<p>The interaction between all these components is handled by the Hotspot Daemon.</p>

<p>In summary, the system is made of the following components:
<ul>
    <li>A USB DAB receiver, controlled by OpenMokast;</li>
    <li>An audio converter, VLC;</li>
    <li>An application on the user device;</li>
    <li>A deamon supervising and controlling the different elements.</li>
</ul></p>

<p>These elements will now be presented in detail.</p>

<h3>Hotspot Daemon</h3>
<p>The Hotspot Daemon is the central piece of the whole system. It receives commands from the user device, controls OpenMokast, and
instanciates audio converters when necessary. It is written in python and is split in several files. <b>The file one has to call to
    invoke the hotspot is <font style="font-family:courier,monospace">hotspotd.py</font></b>.</p>

<p>User commands are received using a HTTP+XML interface, which is reachable on TCP port 8080. If the hotspot is accessed using a standard
browser, a simple control web-page is presented, on which it is possible to
<ul>
    <li>See the different receiver technologies and their capabilities;</li>
    <li>Set the frequency for a receiver;</li>
    <li>Get a list of programmes for a receiver;</li>
    <li>Set the programme one wants to receive;</li>
    <li>Reset the different technologies to the default state.</li>
</ul></p>

<p>The same interface is used by the user device, but instead of being accessed from using a browser, the application presents it in a more
convenient fashion to the user.</p>

<p><b>For the end user,</b> using the browser is required if one wants to change the frequency, because the application does not yet have a way to
do this.</p>

<p>The hotspot sends commands to OpenMokast using its <a href="http://dbus.freedesktop.org/">dbus</a> interface, which presents nearly the same
commands as the telnet interface. Some changes had to be made, which are saved in a dedicated repository. These commands are used to find information
about an ensemble or a service (EID, SID, Service Component ID, sub-channel ID), to select a programme and to set the receiver frequency.</p>

<p>The use of dbus has the following consequences for the use of the hotspot:
<ul>
    <li>OpenMokast has to be started <b>before</b> hotspotd, otherwise the latter will try to launch OpenMokast.</li>
    <li>If no dbus-enabled graphical session is running, or if the hotspot is started on the linux text console, there will be no running dbus session bus.
    It is therefore required to <b>start a dbus session manually</b>.
    This is easily done using <font style="font-family:courier,monospace">dbus-launch screen</font>.</li>
</ul></p>


<h3>Audio Converter</h3>
<h3>User Device Application</h3>
<h3>Receiver and OpenMokast</h3>



</body></html>

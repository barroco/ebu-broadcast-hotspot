package org.ebulabs.hotspot;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.*;
import android.widget.CompoundButton.OnCheckedChangeListener;

public class ConfigureActivity extends Activity {

	HotspotApplication app = ((HotspotApplication)getApplication());
	
	private void toast(String t) {
		Toast.makeText(getApplicationContext(), t, Toast.LENGTH_SHORT).show();
	}
	
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.configuration);
        
        CheckBox enable_Audio = (CheckBox)findViewById(R.id.checkBoxAudio);
        enable_Audio.setOnCheckedChangeListener(new OnCheckedChangeListener() {
			
			@Override
			public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
				app.enableAudio = isChecked;
			}
		});
    }
    
    @Override
    public void onPause() {
    	super.onPause();
    	Log.d(Utils.LOGTAG + "Configure", "saving url");
    	EditText url = (EditText)findViewById(R.id.confUrl);
    	app.hotspotURL = url.getText().toString();
    	
    	EditText ecc = (EditText)findViewById(R.id.confECC);
    	app.ecc = ecc.getText().toString();
    }
    
    @Override
    public void onResume() {
    	super.onResume();
    	Log.d(Utils.LOGTAG + "onResume", "acquiring mcastlock");
    	
    	EditText urledit = (EditText)findViewById(R.id.confUrl);
    	String url = app.hotspotURL;
    	if (urledit == null) {
    		toast("AAARGH");
    		return;
    	}
    	urledit.setText(url);
    	    	
    	/*
    	EditText ecc = (EditText)findViewById(R.id.confECC);
    	ecc.setText(app.ecc);*/
    }
}
